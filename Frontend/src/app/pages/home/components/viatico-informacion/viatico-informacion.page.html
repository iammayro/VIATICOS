<!---Este modal se utiliza en la vista Lista Viaticos por parte del usuario que registra sus viatico-->
<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="cerrarModal()"><ion-icon name="arrow-back"></ion-icon></ion-button>
      <!-- <ion-menu-button menu="menu"></ion-menu-button> -->
      <!-- <img src="../../../assets/images/logo.png" width="25px" style="display:inline-block" height="25px"/> -->
      <!-- <ion-icon slot="icon-only" name="filing"></ion-icon> -->
      <ion-title>
        INFORMACIÓN DEL VIÁTICO
      </ion-title>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="tieneDatos">
  <img class="background-image" />
  <ion-card-content class="background">
    <ion-card>
      <div *ngIf="!tieneDatos">
        No tiene viaticos
      </div>
      <div *ngIf="tieneDatos">
        <!-- {{ viatico | json}} -->
      </div>
      <ion-item *ngIf="this.viatico.folio">
        <ion-label position="floating">Folio Viatico</ion-label>
        <ion-input readonly value="{{this.viatico.folio}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.id_solicitud_comision">
        <ion-label position="floating">Folio Comisión</ion-label>
        <ion-input readonly value="{{this.viatico.id_solicitud_comision}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.nombre_invitado">
        <ion-label position="floating">Nombre de Invitado</ion-label>
        <ion-input readonly value="{{this.viatico.nombre_invitado}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.motivo_comision">
        <ion-label position="floating">Justificación</ion-label>
        <ion-input readonly value="{{this.viatico.motivo_comision}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.lugar_de_comision">
        <ion-label position="floating">Lugar</ion-label>
        <ion-input readonly value="{{this.viatico.lugar_de_comision}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.fecha_solicitud">
        <ion-label position="floating">Fecha de Solicitud</ion-label>
        <ion-input readonly value="{{this.viatico.fecha_solicitud | date}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.fecha_inicio">
        <ion-label position="floating">Inicio</ion-label>
        <ion-input readonly value="{{this.viatico.fecha_inicio | date}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.fecha_fin">
        <ion-label position="floating">Fin</ion-label>
        <ion-input readonly value="{{this.viatico.fecha_fin | date}}"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Status del Viatico</ion-label>
        <ion-input readonly *ngIf="viatico.status == -1" value="Cancelado"></ion-input>
        <ion-input readonly *ngIf="viatico.status == 0" value="Guardado"></ion-input>
        <ion-input readonly *ngIf="viatico.status == 1" value="Enviado a Finanzas"></ion-input>
        <ion-input readonly *ngIf="viatico.status == 2" value="Rechazado por Finanzas"></ion-input>
        <ion-input readonly *ngIf="viatico.status == 3" value="Aceptado por Finanzas"></ion-input>
        <ion-input readonly *ngIf="viatico.status == 4" value="Rechazado por Administrador"></ion-input>
        <ion-input readonly *ngIf="viatico.status == 5" value="Aceptado por Administrador"></ion-input>
        <ion-input readonly *ngIf="viatico.status == 6" value="Capital Asignado"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.fecha_revisado">
       <ion-label position="floating">Fecha Revisado</ion-label>
       <ion-input readonly value="{{this.viatico.fecha_revisado | date}}"></ion-input>
     </ion-item>
      <ion-item *ngIf="this.viatico.fecha_aceptado">
        <ion-label position="floating">Fecha Aceptado</ion-label>
        <ion-input readonly value="{{this.viatico.fecha_aceptado | date}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.nombre_revisado">
        <ion-label position="floating">Nombre Revisado</ion-label>
        <ion-input readonly value="{{this.viatico.nombre_revisado}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="this.viatico.nombre_aceptado">
        <ion-label position="floating">Nombre aceptado</ion-label>
        <ion-input readonly value="{{this.viatico.nombre_aceptado}}"></ion-input>
      </ion-item>
      <ion-item *ngIf="viatico.comentario_rechazo">
        <ion-label position="floating">Comentario Rechazo</ion-label>
        <ion-input readonly value="{{ viatico.comentario_rechazo }}"></ion-input>
      </ion-item>
    </ion-card>
    <div *ngIf="this.viatico.gastos">
      <ion-card>
        <ion-title>Gastos</ion-title>
        <ion-grid>
          <ion-row class="bg-row grid-bot-header">
            <ion-col>
              <ion-label>Fecha Solicitud</ion-label>
            </ion-col>
            <ion-col>
              <ion-label>Rubro</ion-label>
            </ion-col>
            <ion-col>
              <ion-label>Cantidad</ion-label>
            </ion-col>
            <ion-col>
              <ion-label>Numero de Proyecto</ion-label>
            </ion-col>
            <ion-col>
              <ion-label>Estado</ion-label>
            </ion-col>
            <ion-col>
              <ion-label>Eliminar</ion-label>
            </ion-col>
          </ion-row>
          <ion-row *ngFor="let gasto of this.viatico.gastos" class="grid-bot-rows">
            <ion-col>
              <ion-label >{{gasto.dia | date}}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label >{{gasto.rubro}}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label >{{gasto.cantidad | currency}}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label >{{gasto.proyecto}}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label *ngIf="gasto.estatus == 0" >Enviado</ion-label>
              <ion-input *ngIf="gasto.estatus == 1" >Aceptado</ion-input>
              <ion-input *ngIf="gasto.estatus == 2" >Rechazado</ion-input>
            </ion-col>
            <ion-col>
              <ion-button *ngIf="gasto.estatus == 2" (click)="deleteGasto(gasto)" class="center"><ion-icon name="close"></ion-icon></ion-button>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col></ion-col>
            <ion-col>TOTAL: </ion-col>
            <ion-col>{{ totalTotales | currency }}</ion-col>
            <ion-col></ion-col>
            <ion-col></ion-col>
            <ion-col></ion-col>
          </ion-row>
        </ion-grid>
        <ion-button [disabled]="enviarEnabled == false" *ngIf="viatico.status == 0 || viatico.status == 2" (click)="alertConfirm(this.viatico.folio, this.viatico.nombre_invitado, this.viatico.comentarios, 1 )">
          <ion-icon name="send"></ion-icon> Enviar Viático
        </ion-button>
      </ion-card>
    </div>
  </ion-card-content>
</ion-content>